name: CI

on: [push]

jobs:
  build:

    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v1
    - name: Download repository
      run: git clone --single-branch --branch jake-dev https://github.com/SecondFlight/daw-prototype.git
    - name: Download Qt
      run: |
            curl -s -L https://download.qt.io/official_releases/online_installers/qt-unified-windows-x86-online.exe
            cd \
            dir /s *qt-unified-windows-x86-online.exe*
    - name: Install Qt       
      run: .\qt-unified-windows-x86-online.exe --script .\daw-prototype\actions\installer-noninteractive.qs --platform minimal
    - name: Show Qt directory
      run: dir c:/Qt
    - name: Build Anthem
      run: |
           mkdir build
           cd build 
           qmake ../daw-prototype/Prototyping.pro
           make
